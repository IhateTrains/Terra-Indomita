namespace = me_umbria

me_umbria.1 = { #Deal with the etruscans - effect
    type = country_event
    hidden = yes
    
    immediate = {
        trigger_event = {
            id = { me_umbria.28 }
        }
    }
}

me_umbria.2 = { 
    type = country_event
    hidden = yes

    immediate = {
        c:ETR = {
            add_opinion = {
                modifier = etrurian_umbrian_relations_opinion
                target = root
            }
        }
        root = {
            add_opinion = {
                modifier = etrurian_umbrian_relations_opinion
                target = root
            }
        }
    }
    
}

me_umbria.3 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        area:south_etruria_area = {
            add_provincial_claim_effect = yes
        }
        area:north_etruria_area = {
            add_provincial_claim_effect = yes
        }
        area:pisae_area = {
            add_provincial_claim_effect = yes
        }
        hidden:p:131 = {
            add_claim = root
        } 
        hidden:p:140 = {
            add_claim = root
        } 
        add_country_modifier = {
            name = umb_etrurian_imports_cmod
            duration = 7300 #20 years
        }
    }
}

me_umbria.4 = { 
    type = country_event
    hidden = yes
     
    immediate = {
        save_scope_as = umb_country_at_war_with_rome
        random_current_war = {
            limit = {
                AND = {
                    any_war_participant = c:ROM
                    any_war_participant = ROOT
                    OR = {
                        AND = {
                            any_war_attacker = ROOT
                            any_war_defender = c:ROM
                        }
                        AND = {
                            any_war_attacker = c:ROM
                            any_war_defender = ROOT
                        }
                    }
                }
            }
            save_scope_as = war_between_umb_and_rome
        }
        c:ETR = {
            trigger_event = { id = me_umbria.30 }
        }
    }
}

me_umbria.5 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        area:south_etruria_area = {
            add_provincial_claim_effect = yes
        }
        area:north_etruria_area = {
            add_provincial_claim_effect = yes
        }
        area:pisae_area = {
            add_provincial_claim_effect = yes
        }
        hidden:p:131 = {
            add_claim = root
        } 
        hidden:p:140 = {
            add_claim = root
        } 
    }
}

me_umbria.6 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        add_country_modifier = {
            name = umb_influence_from_etruscan_cities_cmod
            duration = 7200 #20 years
        }
        current_ruler = {
            add_popularity = 15
        }
        add_military_experience = 20  
    }
}

me_umbria.7 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        trigger_event = { id = me_umbria.31 }
    }
}

me_umbria.8 = { 
    type = country_event
    hidden = yes

    immediate = {
        area:corsica_area = {
            add_provincial_claim_effect = yes
        }
        area:sardinia_meridionalis = {
            add_provincial_claim_effect = yes
        }
        area:sardinia_septentrionalis = {
            add_provincial_claim_effect = yes
        }
    }
    
}

me_umbria.9 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        add_country_modifier = {
            name = glorious_battle
            duration = 3650
        }
        trigger_event = { id = me_umbria.33 }
        p:23 = {
            add_claim = root
        }
        p:18 = {
            add_claim = root
        }
        area:roma_area = {
            add_provincial_claim_effect = yes
        }
        c:SAB = {
            limit = {
                has_land = yes
            }
            trigger_event = { id = me_umbria.34 days = 3 }
        }
    }
}

me_umbria.10 = { 
    type = country_event
    hidden = yes

    immediate = {
        trigger_event = {
            id = me_umbria.37
        }
    } 
}

me_umbria.11 = { 
    type = country_event
    hidden = yes
    
    p:7 = {
        add_claim = root
    }
    p:6 = {
        add_claim = root
    }
    p:8 = {
        add_claim = root
    }
    p:31 = {
        add_claim = root
    }
    p:40 = {
        add_claim = root
    }
    p:1713 = {
        add_claim = root
    }
    p:9 = {
        add_claim = root
    }
    add_military_experience = 20
}

me_umbria.12 = { 
    type = country_event
    hidden = yes
    
    p:37 = {
        add_claim = root
    }
    p:39 = {
        add_claim = root
    }
    p:36 = {
        add_claim = root
    }
    p:50 = {
        add_claim = root
    }
    p:24 = {
        add_claim = root
    }
    p:27 = {
        add_claim = root
    }
    p:1712 = {
        add_claim = root
    }
    p:30 = {
        add_claim = root
    }
    p:34 = {
        add_claim = root
    }
    p:28 = {
        add_claim = root
    }
    p:48 = {
        add_claim = root
    }
    p:29 = {
        add_claim = root
    }
    p:35 = {
        add_claim = root
    }
    p:45 = {
        add_claim = root
    }
    add_military_experience = 10
}

me_umbria.13 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        root = {
            add_opinion = {
                modifier = umbrian_picentine_alliance_opinion
                target = c:PIE
            }
        }
        c:PIE = {
            add_opinion = {
                modifier = umbrian_picentine_alliance_opinion
                target = ROOT
            }
        }
    }
}

me_umbria.14 = { 
    type = country_event
    hidden = yes

    immediate = {
        trigger_event = { id = me_umbria.39 }
    }
    p:117 = {
        add_claim = root
    }
    
}

me_umbria.15 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        add_country_modifier = {
            name = umb_picentine_imports_cmod
        }
    }
}

me_umbria.16 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        add_military_experience = 20
        add_treasury = 30
    }
}

me_umbria.17 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        if = {
            limit = {
                any_neighbour_country = {
                    AND = {
                        OR = {
                            primary_culture = lepontic
                            primary_culture = sennonian
                        }
                        capital_scope = {
                            OR = {
                                is_in_area = ariminum_area
                                is_in_region = cisalpine_gaul_region
                            }
                        }
                        opinion = {
                            target = root
                            value >= 50
                        }
                    }
                }
            }
            set_variable = umb_mercy_towards_the_cisalpine_gauls
            trigger_event = { id = me_umbria.43 }
        }
        else_if = {
            limit = {
                any_neighbour_country = {
                    AND = {
                        OR = {
                            primary_culture = lepontic
                            primary_culture = sennonian
                        }
                        capital_scope = {
                            OR = {
                                is_in_area = ariminum_area
                                is_in_region = cisalpine_gaul_region
                            }
                        }
                        opinion = {
                            target = root
                            value <= -50
                        }
                    }
                }
            }
            set_variable = umb_conquer_the_cisalpine_gauls
            trigger_event = { id = me_umbria.44 }
        }

    }
}

me_umbria.18 = { 
    type = country_event
    hidden = yes
    
    immediate = {
        save_scope_as = umb_country_to_expand_into_cisalpine_gaul
        random_neighbour_country = {
            limit = {
                AND = {
                    OR = {
                        primary_culture = lepontic
                        primary_culture = sennonian
                    }
                    capital_scope = {
                        OR = {
                            is_in_area = ariminum_area
                            is_in_region = cisalpine_gaul_region
                        }
                    }
                }
            }
            save_scope_as = umb_gallic_country_to_interact_with
        }
        if = {
            limit = {
                has_variable = umb_mercy_towards_the_cisalpine_gauls
            }
            trigger_event = { id = me_umbria.45 }
        }
    }
}

me_umbria.19 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.20 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.21 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.22 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.23 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.24 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.25 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.26 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.27 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.28 = { 
    type = country_event
    title = me_umbria.28.t
    desc = me_umbria.28.desc
    picture = celtic_village

    option = {
        name = me_umbria.28.a
        custom_tooltip = "me_umbria.28.a_tt"
        potential = {
            c:ETR = {
                opinion = {
                    target = root
                    value >= 20
                }
            }
        }
        root.country = {
            set_variable = umb_seeking_friendly_relations_with_etr
        }
    }

    option = {
        name = me_umbria.28.b
        custom_tooltip = "me_umbria.28.b_tt"
        potential = {
            c:ETR = {
                opinion = {
                    target = root
                    value <= -20
                }
            }
        }
        root.country = {
            set_variable = umb_seeking_to_destroy_etr
        }
        hidden:p:131 = {
            add_claim = root
        }
        hidden:p:140 = {
            add_claim = root
        }
        hidden:p:139 = {
            add_claim = root
        }
        hidden:p:124 = {
            add_claim = root
        }
        hidden:p:120 = {
            add_claim = root
        }
        hidden:p:102 = {
            add_claim = root
        }
    }
}

me_umbria.29 = { 
    type = country_event
    hidden = yes
    
}

me_umbria.30 = { #the umbrians have called us to war (ETR)
    type = country_event
    title = me_umbria.30.t
    desc = me_umbria.30.desc
    picture = celtic_village

    option = { #we go to war with rome
        name = me_umbria.30.a
        custom_tooltip = "me_umbria.30.a_tt"
        hidden_effect = {
            if = {
                limit = {
                    scope:war_between_umb_and_rome = {
                        any_war_defender = scope:umb_country_at_war_with_rome
                    }
                }
                add_to_war = {
                    target = scope:war_between_umb_and_rome
                    attacker = no
                    leader = no
                }
            }
            else_if = {
                limit = {
                    scope:war_between_umb_and_rome = {
                        any_war_attacker = scope:umb_country_at_war_with_rome
                    }
                }
                add_to_war = {
                    target = scope:war_between_umb_and_rome
                    attacker = yes
                    leader = no
                }
            }
            scope:umb_country_at_war_with_rome = {
                trigger_event = { id = me_umbria.32 }
            }
        }
        ai_chance = {
            factor = 1
        }
    }

    option = { #we abandon umbria (ai will not choose)
        name = me_umbria.30.b
        custom_tooltip = "me_umbria.30.b_tt"
        hidden_effect = {
            scope:umb_country_at_war_with_rome = {
                add_opinion = {
                    modifier = etruria_abandoned_the_umbrians_opinion
                    target = c:ETR
                }
            }
        }
        add_country_modifier = {
            name = me_abandoned_umbria_cmod
            duration = 3650 #10 years
        }
        ai_chance = {
            factor = 0
        }
    }
}

me_umbria.31 = { #Option to sack Etruria
    type = country_event
    title = me_umbria.31.t
    desc = me_umbria.31.desc
    picture = celtic_village

    immediate = {
        hidden_effect = {
            save_scope_as = umb_country_has_subjegated_the_etruscans
        }
    }

    option = { #Spare the etruscans, gain integration progress and cultural happiness
        name = me_umbria.31.a
        custom_tooltip = "me_umbria.31.a_tt"
        random_country_culture = {
            limit = {
                country_culture = etruscan
            }        
            add_country_culture_modifier = {
                name = me_mercy_to_the_etruscans_umb_culturemod
                duration = 36500 #100 years
            }
            add_integration_progress = 0.5
        }
    }

    option = { #Destroy them! (poor etruscans)
        name = me_umbria.31.b
        custom_tooltip = "me_umbria.31.b_tt"
        hidden_effect = {
            every_owned_province = {
                limit = {
                    OR = {
                        is_in_area = north_etruria_area
                        is_in_area = south_etruria_area
                        is_in_area = pisae_area
                    }
                    dominant_province_culture = etruscan
                }
                ordered_pops_in_province = {
                    limit = { 
                        NOT = { pop_culture = root.culture }
                    }
                    order_by = pop_hapiness
                    max = 4
                    kill_pop
                }
                create_state_pop = freemen
                scope:umb_country_has_subjegated_the_etruscans = {
                    add_treasury = 30
                }
            }
        }
    }
}

me_umbria.32 = { #the Etruscans have joined the fight!
    type = country_event
    title = me_umbria.32.t
    desc = me_umbria.32.desc
    picture = celtic_village

    option = { #yey!
        name = me_umbria.32.a
        custom_tooltip = "me_umbria.32.a_tt"
    }

}

me_umbria.33 = { #We send an ultimatum to the sabines
    type = country_event
    title = me_umbria.33.t
    desc = me_umbria.33.desc
    picture = celtic_village
    
    immediate = {
        hidden_effect = {
            save_scope_as = umb_country_that_wants_narnia
        }
    }

    option = { 
        name = me_umbria.33.a
        custom_tooltip = "me_umbria.33.a_tt"
    }

}

me_umbria.34 = { #We recieve an ultimatum from Umbria for Nequinum
    type = country_event
    title = me_umbria.34.t
    desc = me_umbria.34.desc
    picture = celtic_village

    option = { 
        name = me_umbria.34.a #let us give up Nequinum
        custom_tooltip = "me_umbria.34.a_tt"
        hidden_effect = {
            p:23 = {
                set_owned_by = scope:umb_country_that_wants_narnia
            }
        }
        scope:umb_country_that_wants_narnia = {
            trigger_event = { id = me_umbria.36 days = 1 }
        }
        ai_chance = {
            factor = 0.75
        }
    }

    option = { 
        name = me_umbria.34.b #Over our dead bodies!
        custom_tooltip = "me_umbria.34.b_tt"
        scope:umb_country_that_wants_narnia = {
            trigger_event = { id = me_umbria.36 days = 1 }
        }
        ai_chance = {
            factor = 0.25
        }
    }

}

me_umbria.35 = { #The sabines give us Nequinum
    type = country_event
    title = me_umbria.35.t
    desc = me_umbria.35.desc
    picture = celtic_village

    option = { 
        name = me_umbria.35.a # excellent!
        custom_tooltip = "me_umbria.35.a_tt"
    }

}

me_umbria.36 = { #The sabines refuse to give us give us Nequinum
    type = country_event
    title = me_umbria.36.t
    desc = me_umbria.36.desc
    picture = celtic_village

    option = { 
        name = me_umbria.36.a #It's war then..
        custom_tooltip = "me_umbria.36.a_tt"
        declare_war_with_wargoal = {
            target = c:SAB
            province = 23
            war_goal = conquer_wargoal
        }
    }

}

me_umbria.37 = { #We give an offer of allegiance to the tribes of Italia
    type = country_event
    title = me_umbria.37.t
    desc = me_umbria.37.desc
    picture = celtic_village
    
    immediate = {
        hidden_effect = {
            save_scope_as = umb_country_to_vassalize_the_italic_tribes
        }
    }

    option = { 
        name = me_umbria.37.a #join us against the malevolent latins!
        custom_tooltip = "me_umbria.37.a_tt"
        hidden_effect = {
            every_country = {
                limit = {
                    AND = {
                        is_subject = yes
                        capital_scope = {
                            OR = {
                                is_in_area = aternum_area
                                is_in_area = roma_area
                                is_in_area = aternum_area
                                is_in_area = neapolis_area
                                is_in_area = cannae_area
                            }
                        }
                        is_subject_of = c:ROM
                        has_subject_loyalty < 100
                    }
                }
            }
            trigger_event = { id = me_umbria.38 }
        }
    }

}

me_umbria.38 #Italic tribe recieves offer to join umbria against the romans
    type = country_event
    title = me_umbria.38.t
    desc = me_umbria.38.desc
    picture = celtic_village

    option = {
        name = me_umbria.38.a #We shall cast off our shackles, and join your fight!
        custom_tooltip = "me_umbria.38.a_tt"
        hidden_effect = {
            c:rome = {
                release_subject = root
            }
            scope:umb_country_to_vassalize_the_italic_tribes = {
                make_subject = {
                    target = root
                    type = feudatory
                }
            }
            random_current_war = {
                limit = {
                    OR = {
                        AND = {
                            any_war_defender = scope:umb_country_to_vassalize_the_italic_tribes
                            any_war_attacker = c:ROM
                        }
                        AND = {
                            any_war_attacker = scope:umb_country_to_vassalize_the_italic_tribes
                            any_war_defender = c:ROM
                        }
                    }
                }
                save_scope_as = roman_umbrian_war_for_subject_to_join
            }
            if = {
                limit = {
                    scope:roman_umbrian_war_for_subject_to_join = {
                        AND = {
                            any_war_defender = scope:umb_country_to_vassalize_the_italic_tribes
                            any_war_attacker = c:ROM
                        }
                    }
                }
                add_to_war = {
                    target = scope:roman_umbrian_war_for_subject_to_join
                    attacker = no
                    leader = no
                }
            }
            else_if = {
                limit = {
                    scope:roman_umbrian_war_for_subject_to_join = {
                        AND = {
                            any_war_attacker = scope:umb_country_to_vassalize_the_italic_tribes
                            any_war_defender = c:ROM
                        }
                    }
                }
                add_to_war = {
                    target = scope:roman_umbrian_war_for_subject_to_join
                    attacker = yes
                    leader = no
                }
            }
        }
        ai_chance = {
            factor = 1
        }
    }

    option = {
        name = me_umbria.38.b #We shall not betray our latin brethren!
        custom_tooltip = "me_umbria.38.b_tt"
        ai_chance = {
            factor = 0
        }
    }
}

me_umbria.39 = { #Send an offer of protection to Picentia
    type = country_event
    title = me_umbria.39.t
    desc = me_umbria.39.desc
    picture = celtic_village

    immediate = {
        hidden_effect = {
            save_scope_as = umb_country_to_vassalize_picentia
        }
    }

    option = { #Welcome to our grand federation!
        name = me_umbria.39.a
        custom_tooltip = "me_umbria.39.a_tt"
        hidden_effect = {
            c:PIE = {
                trigger_event = { id = me_umbria.40 }
            }
        }
    }

}

me_umbria.40 = { #Send an offer of protection to Picentia
    type = country_event
    title = me_umbria.40.t
    desc = me_umbria.40.desc
    picture = celtic_village

    option = { #Welcome to our grand federation!
        name = me_umbria.40.a
        custom_tooltip = "me_umbria.40.a_tt"
        hidden_effect = {
            if = {
                limit = {
                    is_subject = yes
                }
                random_country = {
                    limit = {
                        any_subject = {
                            this = ROOT
                        }
                    }
                    release_subject = ROOT
                }
            }
            scope:umb_country_to_vassalize_picentia = {
                make_subject = {
                    target = ROOT
                    type = feudatory
                }
                trigger_event = { id = me_umbria.41 days = 1}
            }
        } 
        ai_chance = {
            factor = 1
        }
    }

    option = { #We must retain our independence
        name = me_umbria.40.b
        custom_tooltip = "me_umbria.40.b_tt"
        hidden_effect = {
            scope:umb_country_to_vassalize_picentia = {
                trigger_event = { id = me_umbria.42 days = 1}
            }
        }
        ai_chance = {
            factor = 0
        }
    }

}

me_umbria.41 = { #the Picenti join us
    type = country_event
    title = me_umbria.41.t
    desc = me_umbria.41.desc
    picture = celtic_village

    option = { #Yey!
        name = me_umbria.41.a
        custom_tooltip = "me_umbria.41.a_tt"
    }
}

me_umbria.42 = { #the Picenti refuse our offer
    type = country_event
    title = me_umbria.42.t
    desc = me_umbria.42.desc
    picture = celtic_village

    option = { #What a pity.
        name = me_umbria.42.a
        custom_tooltip = "me_umbria.42.a_tt"
    }
}

me_umbria.43 = { #Posturing in Cisalpine Gaul (peaceful)
    type = country_event
    title = me_umbria.43.t
    desc = me_umbria.43.desc
    picture = celtic_village

    option = { #We must show mercy towards the Gauls
        name = me_umbria.43.a
        custom_tooltip = "me_umbria.43.a_tt"
    }
}

me_umbria.44 = { #Posturing in Cisalpine Gaul (warmonger)
    type = country_event
    title = me_umbria.44.t
    desc = me_umbria.44.desc
    picture = celtic_village

    option = { #We will push the guals out of those lands
        name = me_umbria.44.a
        custom_tooltip = "me_umbria.44.a_tt"
    }
}

me_umbria.45 = {
    type = country_event
    title = me_umbria.45.t
    desc = me_umbria.45.desc #umb_gallic_country_to_interact_with
    picture = celtic_village #umb_country_to_expand_into_cisalpine_gaul

    
}