namespace = me_albania

me_albania.1 = { # Sons of Arhan
    type = country_event

    title = me_albania_1_title
    desc = me_albania_1_desc
    picture = religious_rite

    option = {
        name = "me_albania_1.a"
        custom_tooltip = me_albania_1_tooltip
        current_ruler = {
            add_zeal = 1
            add_popularity = 5
        }
        capital_scope = {
            define_pop = {
                type = nobles
                religion = root.religion
                culture = root.culture
            }
            define_pop = {
                type = nobles
                religion = root.religion
                culture = root.culture
            }
        }
    }
}
me_albania.2 = { # Stealing back Albanian Lands
    type = country_event

    title = me_albania_2_title
    desc = me_albania_2_desc
    picture = celtic_chiefs

    option = {
        name = "me_albania_2.a"
        area:kahetia_area = { 
            random_area_province = {
                while = {
                    count = 3
                    random_pops_in_province = {
                        limit = {
                            NOR = {
                                culture = albanian
                                religion = caucasian_religion
                            }
                            kill_pop = yes  
                        }
                    }
                    define_pop = {
                        type = freemen
                        religion = root.religion
                        culture = root.culture
                    }
                }
                add_province_modifier = {
                    name = albanian_repopulation
                    duration = 1200
                }
            }
        }
		area:arran_area = { 
            random_area_province = {
                while = {
                    count = 3
                    random_pops_in_province = {
                        limit = {
                            NOR = {
                                culture = albanian
                                religion = caucasian_religion
                            }
                            kill_pop = yes  
                        }
                    }
                    define_pop = {
                        type = freemen
                        religion = root.religion
                        culture = root.culture
                    }
                }
                add_province_modifier = {
                    name = albanian_repopulation
                    duration = 1200
                }
            }
        }
        area:artshak_area = { 
            random_area_province = {
                while = {
                    count = 3
                    random_pops_in_province = {
                        limit = {
                            NOT = {
                                pop_culture = albanian
                            }  
                        }
                        kill_pop = yes
                    }
                    define_pop = {
                        type = freemen
                        religion = root.religion
                        culture = root.culture
                    }
                }
                add_province_modifier = {
                    name = albanian_repopulation
                    duration = 1200
                }
            }
        }
        add_country_modifier = {
            name = land_thieves
            duration = 1200
        }
        c:IBR = {
            add_opinion = {
                modifier = albania_steals_lands
                target = root
            }
        }
        c:ARM = {
            add_opinion = {
                modifier = albania_steals_lands
                target = root
            }
        }
        custom_tooltip = me_albania_2_tooltip

    }
}
me_albania.3 = { # 26 Albanian Languages
    type = country_event

    title = me_albania_3_title
    desc = me_albania_3_desc
    picture = great_library

    option = {
        name = "me_albania_3.a"
        add_political_influence = 10
        custom_tooltip = me_albania_3_tooltip_a
        if = {
            limit = { 
                capital_scope =  {
                    has_city_status = yes
                }
            }
            capital_scope = {
                add_building_level = academy_building
            }
        }
    }

    option = {
        name = "me_albania_3.b"
        set_variable = lupenian_task_var
        custom_tooltip = me_albania_3_tooltip_b
        
    }
}
me_albania.4 = { # Greater Albania
    type = country_event

    title = me_albania_4_title
    desc = me_albania_4_desc
    picture = council_country

    option = { # Completion
        name = "me_albania_4.a"
        custom_tooltip = me_albania_4_tooltip
    }

    option = { # 'Greatest' Albania
        name = "me_albania_4.b"
        add_political_influence = -20
        current_ruler = {
            add_trait = ambitious
        }
        change_country_name = GREATEST_ALBANIA # a joke-formable, if you will
        change_country_color = lighter_dark_orange
        hidden_effect = {
            change_country_flag = GREATEST_ALBANIA_FLAG
        }
    }
}
me_albania.5 = { # Secure The Kura-Araxes Trade
    type = country_event

    title = me_albania_5_title
    desc = me_albania_5_desc
    picture = greek_marketplace

    option = {
        name = "me_albania_5.a"
        custom_tooltip = me_albania_5_tooltip
    }
}
me_albania.6 = { # An Albanian King
    type = country_event

    title = me_albania_6_title
    desc = me_albania_6_desc
    picture = throneroom

    option = {
        name = "me_albania_6.a"
        custom_tooltip = me_albania_6_tooltip
        current_ruler = {
            add_prominence = 350
            add_popularity = 10
            add_martial = 1
            add_charisma = 1
            add_health = 10
            add_trait = secure
        }
    }
}
me_albania.7 = { # The Republic of Albania
    type = country_event

    title = me_albania_7_title
    desc = me_albania_7_desc
    picture = council_country

    option = {
        name = "me_albania_7.a"
        custom_tooltip = me_albania_7_tooltip
    }
}
me_albania.8 = { # Disgruntled Republican Citizens
    type = country_event

    title = me_albania_8_title
    desc = me_albania_8_desc
    picture = council_country

    option = {
        name = "me_albania_8.a"
        add_treasury = -200
        add_political_influence = -30
        current_ruler = {
            add_gold = -250
        }
        add_country_modifier = {
            name = albanian_tribes_appeased
            duration = 900
        }
    }

    option = {
        name = "me_albania_8.b"
        custom_tooltip = me_albania_8b_tooltip
        add_tyranny = 10
        hidden_effect = {
            trigger_event = {
                id = me_albania.11 # 4-tribe Group Imperial Challenge War
                days = 10
            }
        }
    }
}
me_albania.9 = { # A Rebel King
    type = country_event

    title = me_albania_9_title
    desc = me_albania_9_desc
    picture = revolt

    immediate = {
        hidden_effect = {
            create_character = {
                age = 23
                female = no
                culture = albanian
                religion = caucasian_religion
                add_martial = 8
				add_trait = conqueror
                force_add_trait = blood_of_arhan
                save_scope_as = albanian_rebel_king
            }
            create_character = {
                age = 32
                female = no
                culture = albanian
                religion = caucasian_religion
                add_martial = 12
				add_trait = disciplined
                force_add_trait = blood_of_arhan
                save_scope_as = albanian_rebel_commander
            }
        } 
    }

    option = {
        name = "me_albania_9.a"
        add_country_modifier = {
            name = albania_destabilized
            duration = 1200
        }
        custom_tooltip = me_albania_9a_tooltip
        hidden_effect = {
            start_civil_war = scope:albanian_rebel_king  
		    scope:albanian_rebel_king.employer = {
                set_capital = 1584
                change_government = despotic_monarchy
			    set_country_heritage = caucasia_albania_heritage
			    change_country_name = albanian_king_rebellion_name
			    change_country_adjective = albanian_king_rebellion_adj
			    save_scope_as = albanian_royal_rebellion_scope
			    change_country_color = eumenid_blue
			    #change_country_flag = EUMENID_FLAG # change?????
			    change_country_tag = ARB
		    }
		    scope:albanian_royal_rebellion_scope = {
			    every_owned_province = {
				    limit = {
					    NOT = { this = p:1584 }
				    }
				    remove_building_level = fortress_building
				    set_owned_by = root
			    }
		    }
            p:1584 = { # Utidorsi
			    set_owned_by = scope:albanian_royal_rebellion_scope
                add_building_level = fortress_building
		    }
		    p:1644 = { # Paytakaran
			    set_owned_by = scope:albanian_royal_rebellion_scope
		    }
            p:1651 = { # Shahargah
			    set_owned_by = scope:albanian_royal_rebellion_scope
		    }
            p:1672 = { # Southeastern Arran
			    set_owned_by = scope:albanian_royal_rebellion_scope
		    }
            p:1671 = { # Southwestern Arran
			    set_owned_by = scope:albanian_royal_rebellion_scope
		    }
            p:1661 = { # Arash
			    set_owned_by = scope:albanian_royal_rebellion_scope
		    }

            scope:albanian_royal_rebellion_scope = {
                add_treasury = 350
				create_unit = {
					navy = no
					location = 1584
                    commander = scope:albanian_rebel_commander
					while = {
						count = 6
						add_subunit = horse_archers
					}
					while = {
						count = 4
						add_subunit = light_cavalry
					}
					while = {
						count = 2
						add_subunit = supply_train
					}
					add_food = 100
					add_morale = 2.5
				}
			}
        }
    }

    option = {
        name = "me_albania_9.b"
        custom_tooltip = me_albania_9b_tooltip
        hidden_effect = {
            trigger_event = { # NON-VISIBLE EVENT
                id = me_albania.12 # Player Switch to Udian Kingdom
                days = 10
            }
        }
    }
}
me_albania.10 = { # Fighting for Democracy
    type = country_event

    title = me_albania_10_title
    desc = me_albania_10_desc
    picture = revolt

    immediate = {
        hidden_effect = {
            create_character = {
                age = 23
                female = no
                culture = albanian
                religion = caucasian_religion
                add_finesse = 7
                add_charisma = 7
				add_trait = benefactor
                add_trait = wise
                force_add_trait = blood_of_arhan
                save_scope_as = albanian_rebel_democrat
            }
            create_character = {
                age = 20
                female = no
                culture = albanian
                religion = caucasian_religion
                add_martial = 7
				add_trait = confident
                save_scope_as = albanian_democratic_commander
            }
        } 
    }

    option = {
        name = "me_albania_10.a"
        add_country_modifier = {
            name = albania_destabilized
            duration = 1200
        }
        custom_tooltip = me_albania_10a_tooltip
        hidden_effect = {
            start_civil_war = scope:albanian_rebel_democrat
            scope:albanian_rebel_democrat.employer = {
                set_capital = 1643
                change_government = democratic_republic
                set_country_heritage = caucasia_albania_heritage
                change_country_name = albanian_democratic_rebellion_name
                change_country_adjective = albanian_democratic_rebellion_adj
                save_scope_as = albanian_democratic_rebellion_scope
                change_country_color = sun_yellow
                #change_country_flag = EUMENID_FLAG # change?????
                change_country_tag = ADR
            }
            scope:albanian_democratic_rebellion_scope = {
                every_owned_province = {
                    limit = {
                        NOT = { this = p:1643 }
                    }
                    remove_building_level = fortress_building
                    set_owned_by = root
                }
            }
            p:1643 = { # Samukh
                set_owned_by = scope:albanian_democratic_rebellion_scope
                add_building_level = fortress_building
            }
            p:1641 = { # Gumbati
                set_owned_by = scope:albanian_democratic_rebellion_scope
            }
            p:1660 = { # Cambysene
                set_owned_by = scope:albanian_democratic_rebellion_scope
            }
            p:5435 = { # Kurus
                set_owned_by = scope:albanian_democratic_rebellion_scope
            }
            p:1659 = { # Lagodekhi
                set_owned_by = scope:albanian_democratic_rebellion_scope
            }
            p:1646 = { # Gardman
                set_owned_by = scope:albanian_democratic_rebellion_scope
            }
            p:1608 = { # Berd
                set_owned_by = scope:albanian_democratic_rebellion_scope
            }
    
            scope:albanian_democratic_rebellion_scope = {
                add_treasury = 250
                create_unit = {
                    navy = no
                    location = 1643
                    commander = scope:albanian_democratic_commander
                    while = {
                        count = 2
                        add_subunit = horse_archers
                    }
                    while = {
                        count = 2
                        add_subunit = light_cavalry
                    }
                    while = {
                        count = 8
                        add_subunit = light_infantry
                    }
                    while = {
                        count = 2
                        add_subunit = supply_train
                    }
                    add_food = 100
                    add_morale = 2.5
                }
            }       
        }  
    }

    option = {
        name = "me_albania_10.b"
        custom_tooltip = me_albania_10b_tooltip
        hidden_effect = {
            trigger_event = { # NON-VISIBLE EVENT
                id = me_albania.13 # Player Switch to Albanian Democracy
                days = 10
            }
        }
    }
}
me_albania.11 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.12 = { # Switch to play Udian Kingdom
    type = country_event

    title = me_albania_12_title
    desc = me_albania_12_desc
    picture = throneroom

    immediate = {
		hidden_effect = {
			scope:albanian_rebel_king = {
				save_scope_as = new_ruler
				move_country = root
				remove_character_modifier = foreign_citizen
			}
            p:1584 = { # Utidorsi
                add_to_list = new_country_province_list
                add_building_level = fortress_building
		    }
		    p:1644 = { # Paytakaran
                add_to_list = new_country_province_list
		    }
            p:1651 = { # Shahargah
                add_to_list = new_country_province_list
		    }
            p:1672 = { # Southeastern Arran
                add_to_list = new_country_province_list
		    }
            p:1671 = { # Southwestern Arran
                add_to_list = new_country_province_list
		    }
            p:1661 = { # Arash
                add_to_list = new_country_province_list
		    }
			
			switch_player_country_effect = {
				NEW_NAME = albanian_king_rebellion_name
				NEW_ADJECTIVE = albanian_king_rebellion_adj
				NEW_GOVERNMENT = despotic_monarchy
				NEW_COLOR = eumenid_blue
				NEW_RELIGION = caucasian_religion
				NEW_CULTURE = albanian
				NEW_FLAG = CAPPADOCIA_CIMMERIAN_FLAG # Placeholder 
				NEW_TAG = ARB
				NEW_HERITAGE = caucasia_albania_heritage
				OLD_COUNTRY_COLOR = lighter_dark_orange
				OLD_COUNTRY_NAME = ALB
				OLD_COUNTRY_ADJ = ALB_ADJ
				OLD_COUNTRY_FLAG = ALB
				OLD_COUNTRY_HERITAGE = caucasia_albania_heritage
				OLD_COUNTRY_CULTURE = albanian
				OLD_COUNTRY_RELIGION = caucasian_religion
				OLD_TAG = ALB
			}
			scope:old_country = {
				random_country_culture = {
					limit = {
						is_culture = albanian
						is_integrated = no
					}
					set_country_culture_right = citizen
				}
			}
            add_treasury = 300
			add_country_modifier = { 
				name = udian_champion
				duration = 1825 # 5 years; mostly there to finance the army you just got
			}
			create_unit = {
                navy = no
                location = 1584
                commander = scope:albanian_rebel_commander
                while = {
                    count = 6
                    add_subunit = horse_archers
                }
                while = {
                    count = 4
                    add_subunit = light_cavalry
                }
                while = {
                    count = 2
                    add_subunit = supply_train
                }
                add_food = 100
                add_morale = 2
            }
            if = {
				limit = {
					owns = 1584 # Utidorsi
				}
				set_capital = p:1584
			}
		}
	}

    option = {
        name = "me_albania_12.a"
        custom_tooltip = me_albania_12_tooltip
        scope:old_country = {
			declare_war_with_wargoal = {
				war_goal = imperial_conquest_wargoal
				target = scope:new_country
			}
		}
    }
}
me_albania.13 = { # Switch to play Albanian Democracy
    type = country_event

    title = me_albania_13_title
    desc = me_albania_13_desc
    picture = greek_philosophers

    immediate = { 
		hidden_effect = {
			scope:albanian_rebel_democrat = {
				save_scope_as = new_ruler
				move_country = root
				remove_character_modifier = foreign_citizen
			}
            p:1643 = { # Samukh
                add_to_list = new_country_province_list
                add_building_level = fortress_building
            }
            p:1641 = { # Gumbati
                add_to_list = new_country_province_list
            }
            p:1660 = { # Cambysene
                add_to_list = new_country_province_list
            }
            p:5435 = { # Kurus
                add_to_list = new_country_province_list
            }
            p:1659 = { # Lagodekhi
                add_to_list = new_country_province_list
            }
            p:1646 = { # Gardman
                add_to_list = new_country_province_list
            }
            p:1608 = { # Berd
                add_to_list = new_country_province_list
            }
			
			switch_player_country_effect = {
				NEW_NAME = albanian_democratic_rebellion_name
				NEW_ADJECTIVE = albanian_democratic_rebellion_adj
				NEW_GOVERNMENT = democratic_republic
				NEW_COLOR = sun_yellow
				NEW_RELIGION = caucasian_religion
				NEW_CULTURE = albanian
				NEW_FLAG = ASTYPALAIA_FLAG # PLACEHOLDER
				NEW_TAG = ARB
				NEW_HERITAGE = caucasia_albania_heritage
				OLD_COUNTRY_COLOR = lighter_dark_orange
				OLD_COUNTRY_NAME = ALB
				OLD_COUNTRY_ADJ = ALB_ADJ
				OLD_COUNTRY_FLAG = ALB
				OLD_COUNTRY_HERITAGE = caucasia_albania_heritage
				OLD_COUNTRY_CULTURE = albanian
				OLD_COUNTRY_RELIGION = caucasian_religion
				OLD_TAG = ALB
			}
			scope:old_country = {
				random_country_culture = {
					limit = {
						is_culture = albanian
						is_integrated = no
					}
					set_country_culture_right = citizen
				}
			}
			add_country_modifier = { 
				name = albanian_democratic_champion
				duration = 1825 # 5 years; mostly there to finance the army you just got
			}
            add_treasury = 250
			create_unit = {
                navy = no
                location = 1643
                commander = scope:albanian_democratic_commander
                while = {
                    count = 2
                    add_subunit = horse_archers
                }
                while = {
                    count = 2
                    add_subunit = light_cavalry
                }
                while = {
                    count = 8
                    add_subunit = light_infantry
                }
                while = {
                    count = 2
                    add_subunit = supply_train
                }
                add_food = 100
                add_morale = 2.5
            }
			if = {
				limit = {
					owns = 1643 # Samukh
				}
				set_capital = p:1643
			}
		}
	}

    option = {
        name = "me_albania_13.a"
        custom_tooltip = me_albania_13_tooltip
        scope:old_country = {
			declare_war_with_wargoal = {
				war_goal = imperial_conquest_wargoal
				target = scope:new_country
			}
		}
    }
}
me_albania.14 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.15 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.16 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.17 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.18 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.19 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.20 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.21 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.22 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.23 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.24 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.25 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.26 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.27 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.28 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.29 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
me_albania.30 = { # 4-way Tribal Imperial Challenge War (The Albanian War)
    type = country_event

    title = me_albania_11_title
    desc = me_albania_11_desc
    picture = great_library

    option = {
        name = "me_albania_11.a"
        custom_tooltip = me_albania_11_tooltip

    }
}
