samnium_mission_2 = { # 2nd Mission for Samnium 
	icon = rome_2
	header = mission_image_macedonian
	
	repeatable = no

    chance = {
		factor = 10
	}
	
	ai_chance = { factor = 10 }

	potential = { 
		NOT = {
			has_variable = samnium_mission_2_cooldown
		}
		has_completed_mission = samnium_mission
	}
	
	abort = {
        ai_mission_back_out_trigger = yes
    }

    on_potential = {}

    on_start = {
    	start_mission_ai_effect = yes
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = samnium_mission_2_cooldown
            days = 7300
        }
    }

    on_completion = {
    	complete_mission_effect = yes
		add_3_free_province_investments = yes
    }

	samnium_2_task_1 = { # the outside world/hellenic contacts
		icon = "task_conquest"
		duration = 365
		on_start = {
			trigger_event = { id = samnium_event.25 }
			custom_tooltip = samnium_hellenism_contact_increase_tt

			trigger_event = {
				id = samnium_event.79
				days = { 30 60 }
			}

			trigger_event = {
				id = samnium_event.80
				days = { 90 120 }
			}

			trigger_event = {
				id = samnium_event.81
				days = { 150 180 }
			}

			trigger_event = {
				id = samnium_event.82
				days = { 210 240 }
			}

			trigger_event = {
				id = samnium_event.83
				days = { 270 300 }
			}

			trigger_event = {
				id = samnium_event.84
				days = { 330 360 }
			}
		}
	}

	samnium_2_task_2 = { # decision how to react to these interactions
		icon = "task_conquest"
		duration = 365
		requires = { samnium_2_task_1 }
		allow = {
			num_of_ports >= 3
			custom_tooltip = {
				text = samnium_hellenic_pops_tt
				messapia_religion_hellenic_svalue >= 50
			}
		}
		on_start = {
			trigger_event = { id = samnium_event.26 }
			custom_tooltip = samnium_hellenism_contact_reaction_tt
		}
	}

	samnium_2_task_3 = { # stay true to your values, limit trade to a minimum. little hellenic influences
		icon = "task_conquest"
		allow = {
			trigger_if = {
				limit = {
					has_variable = samnium_rel_conflict_var
					var:samnium_rel_conflict_var <= -2 #at least -2
				}
				political_influence >= 25
			}
			trigger_else_if = {
				limit = {
					has_variable = samnium_rel_conflict_var
					var:samnium_rel_conflict_var > 0 # greater than 0
				}
				political_influence >= 75
			}
			trigger_else = {
				political_influence >= 50
			}
		}
		requires = { samnium_2_task_2 }
		prevented_by = { samnium_2_task_4 samnium_2_task_5 }
		on_completion = {
			trigger_event = { id = samnium_event.27 }
			show_as_tooltip = {
				if = {
					limit = {
						has_variable = samnium_rel_conflict_var
						var:samnium_rel_conflict_var <= -2 #at least -2
					}
					add_political_influence = -25
					add_stability = 5
				}
				else_if = {
					limit = {
						has_variable = samnium_rel_conflict_var
						var:samnium_rel_conflict_var > 0 # greater than 0
					}
					add_political_influence = -75
					add_stability = -5
				}
				else = {
					add_political_influence = -50
				}
				add_country_modifier = {
					name = sam_cultural_resistance_path
					duration = 18250 # 50 years
				}
			}
			custom_tooltip = sam_rel_conflict_cost_reward_tt
		}
	}

	samnium_2_task_4 = { # syncretism; ± historical path, mix native with greek elements
		icon = "task_conquest"
		duration = 90
		prevented_by = { samnium_2_task_3 samnium_2_task_5 }
		requires = { samnium_2_task_2 }
		on_completion = {
			trigger_event = { id = samnium_event.28 }
			show_as_tooltip = {
				if = {
					limit = {
						has_variable = samnium_rel_conflict_var
						var:samnium_rel_conflict_var > -2 # between 1 and -1
						var:samnium_rel_conflict_var < 2
					}
					add_stability = 10
					add_political_influence = 25
				}
				add_country_modifier = {
					name = sam_harmony_path
					duration = 18250 # 50 years
				}
				custom_tooltip = sam_rel_conflict_cost_reward_tt
			}
		}
	}

	samnium_2_task_5 = { # philhellenism, convert and abandon native values
		icon = "task_conquest"
		allow = {
			trigger_if = {
				limit = {
					has_variable = samnium_rel_conflict_var
					var:samnium_rel_conflict_var < 1 #less than 1
				}
				political_influence >= 75
			}
			trigger_else_if = {
				limit = {
					has_variable = samnium_rel_conflict_var
					var:samnium_rel_conflict_var > 2 # greater than 2
				}
				political_influence >= 25
			}
			trigger_else = {
				political_influence >= 50
			}
		}
		requires = { samnium_2_task_2 }
		prevented_by = { samnium_2_task_3 samnium_2_task_4 }
		on_completion = {
			trigger_event = { id = samnium_event.29 }
			show_as_tooltip = {
				if = {
					limit = {
						has_variable = samnium_rel_conflict_var
						var:samnium_rel_conflict_var < 1 #less than 1
					}
					add_political_influence = -75
					add_stability = -5
				}
				else_if = {
					limit = {
						has_variable = samnium_rel_conflict_var
						var:samnium_rel_conflict_var > 2 # greater than 2
					}
					add_political_influence = 75
					add_stability = 5
				}
				else = {
					add_political_influence = -50
				}
				soft_change_religion_effect = {
					RELIGION = roman_pantheon
				}
				add_country_modifier = {
					name = sam_philhellenism_path
					duration = -1 # this one is permanent!
				}
				if = {
					limit = {
						has_country_modifier = sam_traditionalists_demands
					}
					remove_country_modifier = sam_traditionalists_demands
				}
			}
			custom_tooltip = sam_rel_conflict_cost_reward_tt
		}
	}
	
	samnium_2_task_6 = { # resitance --> purge the hellenics
		icon = "task_conquest"
		allow = {
			religious_unity >= 90
		}
		requires = { samnium_2_task_3 }
		on_completion = {
			trigger_event = { id = samnium_event.30 }
			show_as_tooltip = {
				add_political_influence = 50
				add_country_modifier = {
					name = sam_purging_foreign_influences
					duration = 9125 # 25 years
				}
			}
		}
	}

	samnium_2_task_7 = { # syncretism --> some hotspots, but not terribly populated for the most part
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_gateway_tt
				any_owned_province = {
					num_of_port_building >= 3
					state = {
						incoming_trade_routes >= 2
					}
				}
			}
		}
		requires = { samnium_2_task_4 }
		on_completion = {
			trigger_event = { id = samnium_event.31 }
			show_as_tooltip = {
				add_treasury = 250
				random_owned_province = {
					limit = {
						num_of_port_building >= 3
						state = {
							incoming_trade_routes >= 2
						}
					}
					add_province_modifier = {
						name = syncretism_interact_trade
						duration = -1
					}
				}
			}
		}
	}

	samnium_2_task_8 = { # conversion --> urbanization
		icon = "task_conquest"
		allow = {
			treasury >= 250
			invention = change_governor_policy_inv
		}
		duration = 180
		requires = { samnium_2_task_9 samnium_2_task_16 }
		on_completion = {
			trigger_event = { id = samnium_event.32 }
			show_as_tooltip = {
				add_treasury = -250
				add_country_modifier = {
					name = sam_urbanization_drive
					duration = -1
				}
				ordered_owned_province = {
					limit = {
						has_city_status = no
					}
					order_by = {
						value = 0
						add = population_cap
						subtract = total_population
					}
					max = 2
					check_range_bounds = no
					set_city_status = city
				}
			}
		}
	}

	samnium_2_task_9 = { # conversion --> convert
		icon = "task_conquest"
		allow = {
			religious_unity >= 80
		}
		requires = { samnium_2_task_5 }
		on_completion = {
			trigger_event = { id = samnium_event.33 }
			show_as_tooltip = {
				add_political_influence = 50
				add_country_modifier = {
					name = sam_converting_populace
					duration = 9125 # 25 years
				}
			}
		}
	}

	samnium_2_task_10 = { # traditional way of life - resistance --> rural
		icon = "task_conquest"
		allow = {
			invention = technology_cost_inv_1
			trigger_if = {
				limit = {
					is_republic = yes
				}
				has_law = republic_corruption_2
			}
			trigger_else = {
				current_ruler = {
					corruption = 0
				}
			}
		}
		requires = { samnium_2_task_3 }
		on_completion = {
			trigger_event = { id = samnium_event.34 }
			show_as_tooltip = {
				add_treasury = 250
				ordered_owned_province = {
					limit = {
						has_city_status = no
					}
					order_by = {
						value = 0
						add = population_cap
						subtract = total_population
					}
					max = 3
					check_range_bounds = no
					create_2_freemen_effect = yes
				}
			}
		}
	}

	samnium_2_task_11 = { # resistance --> rural strengthen the Pagus
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = pagi_svalue_tt
				samnite_pagus_svalue >= 15
			}
		}
		highlight = {
			scope:province = {
				owner = root
				OR = {
					has_city_status = no
				}
			}
		}
		requires = { samnium_2_task_6 samnium_2_task_10 }
		on_completion = {
			trigger_event = { id = samnium_event.35 }
			show_as_tooltip = {
				add_country_modifier = {
					name = strengthen_the_pagus
					duration = -1
				}
			}
		}
	}

	samnium_2_task_12 = { # resistance --> rural pastoralism, transhumance
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_pastoralism_tt
				samnite_pastoralism_svalue >= 6
			}
		}
		highlight = {
			scope:province = {
				owner = root
				OR = {
					has_food_trade_good_trigger = yes
				}
			}
		}
		requires = { samnium_2_task_10 }
		on_completion = {
			trigger_event = { id = samnium_event.36 }
			show_as_tooltip = {
				add_country_modifier = {
					name = traditional_lifestyle
					duration = -1 # 36500 # 100 years
				}
			}
		}
	}

	samnium_2_task_13 = { # resistance --> rural increased production
		icon = "task_conquest"
		final = yes
		allow = {
			custom_tooltip = {
				text = samnite_production_svalue_tt
				samnite_production_svalue >= 50
			}
		}
		requires = { samnium_2_task_12 samnium_2_task_11 }
		on_completion = {
			trigger_event = { id = samnium_event.37 }
			show_as_tooltip = {
				add_country_modifier = {
					name = sam_increased_production
					duration = -1
				}
				custom_tooltip = increased_priduction_tt
			}
		}
	}

	samnium_2_task_14 = { # resistance --> destroy idols
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_destroy_idols_tt
				sam_destroy_idols_svalue = 0
			}
		}
		highlight = {
			scope:province = {
				OR = {
					is_in_region = magna_graecia_region
					is_in_region = central_italy_region
					is_in_area = pisae_area
				}
				NOR = {
					is_in_area = corsica_area
					is_in_area = sardinia_septentrionalis
					is_in_area = sardinia_meridionalis
					is_in_area = syracuse_area
					is_in_area = east_sicily_area
					is_in_area = west_sicily_area
				}
			}
		}
		requires = { samnium_2_task_6 }
		on_completion = {
			trigger_event = { id = samnium_event.38 }
			show_as_tooltip = {
				current_ruler = {
					add_zeal = 1
					add_trait = zealous
				}
				create_country_treasure = {
					key = "sam_statue_maris"
					icon = "treasure_statue"
					modifier = {
						local_manpower_modifier = 0.25
					}
				}
				create_country_treasure = {
					key = "sam_statue_mefitis"
					icon = "treasure_statue"
					modifier = {
						local_nobles_desired_pop_ratio = 0.1
					}
				}
			}
		}
	}

	samnium_2_task_15 = { # philhellenism --> supremacy of the new faith
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_destroy_idols_tt
				sam_destroy_idols_svalue = 0
			}
		}
		prevented_by = { samnium_2_task_18 }
		highlight = {
			scope:province = {
				OR = {
					is_in_region = magna_graecia_region
					is_in_region = central_italy_region
					is_in_area = pisae_area
				}
				NOR = {
					is_in_area = corsica_area
					is_in_area = sardinia_septentrionalis
					is_in_area = sardinia_meridionalis
					is_in_area = syracuse_area
					is_in_area = east_sicily_area
					is_in_area = west_sicily_area
				}
			}
		}
		requires = { samnium_2_task_9 }
		on_completion = {
			trigger_event = { id = samnium_event.39 }
			show_as_tooltip = {
				current_ruler = {
					add_zeal = 1
					add_trait = zealous
				}
				create_country_treasure = {
					key = "sam_statue_herakles"
					icon = "treasure_statue"
					modifier = {
						local_manpower_modifier = 0.15
						local_freemen_desired_pop_ratio = 0.1
					}
				}
			}
		}
	}

	samnium_2_task_16 = { # to the origin - philhellenism
		icon = "task_conquest"
		duration = 180
		requires = { samnium_2_task_5 }
		on_start = {
			trigger_event = { id = samnium_event.40 }
			show_as_tooltip = {
				custom_tooltip = sam_visit_greeks_tt
			}
		}
	}

	samnium_2_task_17 = { # linking up - philhellenism
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_ally_hellenic_tt
				any_country = {
					alliance_with = root
					country_culture_group = hellenic 
				}
			}
		}
		requires = { samnium_2_task_16 }
		on_completion = {
			trigger_event = { id = samnium_event.41 }
			show_as_tooltip = {
				custom_tooltip = sam_hell_ally_reward_tt
			}
		}
	}

	samnium_2_task_18 = { # permit religious freedom - philhellenism
		icon = "task_conquest"
		duration = 30
		allow = {
			political_influence >= 10
		}
		requires = { samnium_2_task_9 }
		prevented_by = { samnium_2_task_15 }
		on_completion = {
			trigger_event = { id = samnium_event.42 }
			show_as_tooltip = {
				add_stability = 5
				add_political_influence = -10
				add_country_modifier = {
					name = permit_religious_freedom
					duration = -1
				}
			}
		}
	}

	samnium_2_task_19 = { # a truly civilized samnium - philhellenism
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_civ_cities_tt
				any_owned_province = {
					count >= 12
					has_city_status = yes
					total_population >= 25 
				}
			}
		}
		highlight = {
			scope:province = {
				owner = root
				has_city_status = yes
			}
		}
		requires = { samnium_2_task_8 }
		on_completion = {
			trigger_event = { id = samnium_event.43 }
			show_as_tooltip = {
				add_country_modifier = {
					name = truly_civilized_samnium
					duration = -1
				}
			}
		}
	}

	samnium_2_task_20 = { # centre of civilized italia - philhellenism
		icon = "task_conquest"
		final = yes 
		allow = {
			hidden:capital_scope = {
				has_province_rank = city_metropolis
				civilization_value >= 50
			}
		}
		highlight = {
			scope:province = {
				this = root.capital_scope
			}
		}
		requires = { samnium_2_task_19 }
		on_completion = {
			trigger_event = { id = samnium_event.44 }
			show_as_tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = sam_civilized_centre
						duration = -1
					}
					create_state_pop = nobles
					create_state_pop = nobles
				}
			}
		}
	}

	samnium_2_task_21 = { # syncretism --> sanctuaries
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_sync_sanc_tt
				any_owned_holy_site = {
					count >= 5
					dominant_province_culture = samnite
				}
			}
		}
		highlight = {
			scope:province = {
				is_holy_site = yes
			}
		}
		requires = { samnium_2_task_7 }
		on_completion = {
			trigger_event = { id = samnium_event.45 }
			show_as_tooltip = {
				add_country_modifier = {
					name = samnite_sanctuaries
					duration = -1
				}
				every_owned_holy_site = {
					limit = {
						dominant_province_culture = samnite
					}
					add_province_modifier = {
						name = samnite_sanctuary
						duration = -1
					}
				}
			}
		}
	}

	samnium_2_task_22 = { # syncretism --> exchange of ideas
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_import_tt
				any_country = {
					count >= 3
					exports_to = ROOT
				}
			}
		}
		requires = { samnium_2_task_7 }
		on_completion = {
			trigger_event = { id = samnium_event.46 }
			show_as_tooltip = {
				add_innovation = 1
				add_research = {
					technology = military_tech
					value = 25
				}
				add_research = {
					technology = civic_tech
					value = 25
				}
				add_research = {
					technology = oratory_tech
					value = 25
				}
				add_research = {
					technology = religious_tech
					value = 25
				}
			}
		}
	}

	samnium_2_task_23 = { # syncretism --> new conecption of death 
		icon = "task_conquest"
		duration = 365
		requires = { samnium_2_task_21 }
		on_completion = {
			trigger_event = { id = samnium_event.47 }
			show_as_tooltip = {
				custom_tooltip = sam_burial_event_tt
				add_country_modifier = {
					name = sam_more_modest_burials
					duration = -1
				}
			}
		}
	}

	samnium_2_task_24 = { # traditional burials - resistance path
		icon = "task_conquest"
		duration = 365
		requires = { samnium_2_task_10 }
		on_completion = {
			trigger_event = { id = samnium_event.48 }
			show_as_tooltip = {
				custom_tooltip = sam_burial_event_tt
			}
		}
	}

	samnium_2_task_25 = { # greek burials - philhellenism
		icon = "task_conquest"
		duration = 365
		requires = { samnium_2_task_5 }
		on_completion = {
			trigger_event = { id = samnium_event.49 }
			show_as_tooltip = {
				custom_tooltip = sam_burial_event_tt
			}
		}
	}

	samnium_2_task_26 = { # syncretism
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_integrate_hellenic_tt
				any_country_culture = {
					is_integrated = yes
					is_greek_culture_group_trigger = yes
				}
			}
		}
		requires = { samnium_2_task_7 }
		on_completion = {
			trigger_event = { id = samnium_event.50 }
			show_as_tooltip = {
				add_treasury = 500
				add_political_influence = 50
				custom_tooltip = sam_flattery_tt
			}
		}
	}

	samnium_2_task_27 = { # philhellenism 
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_integrate_hellenic_tt
				any_country_culture = {
					is_integrated = yes
					is_greek_culture_group_trigger = yes
				}
			}
		}
		requires = { samnium_2_task_17 }
		on_completion = {
			trigger_event = { id = samnium_event.51 }
			show_as_tooltip = {
				custom_tooltip = sam_flattery_tt
				custom_tooltip = sam_immigrating_greeks_tt
			}
		}
	}

	samnium_2_task_28 = { # syncretism farming
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = pagi_svalue_tt
				samnite_pagus_svalue >= 15
			}
		}
		requires = { samnium_2_task_4 }
		on_completion = {
			trigger_event = { id = samnium_event.52 }
			show_as_tooltip = {
				custom_tooltip = sam_rural_community_growth
			}
		}
	}

	samnium_2_task_29 = { # exports
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = sam_exports_tt
				sam_export_svalue >= 5
			}
		}
		requires = { samnium_2_task_28 }
		on_completion = {
			trigger_event = { id = samnium_event.53 }
			show_as_tooltip = {
				add_country_modifier = {
					name = sam_rising_exports
					duration = -1
				}
			}
		}
	}

	samnium_2_task_30 = { # the rich peasants
		icon = "task_conquest"
		final = yes
		allow = {
			capital_scope = {
				province_tax_income >= 1.5
				num_of_nobles >= 5
				state = {
					incoming_trade_routes >= 5
				}
			}
		}
		highlight = {
			scope:province = {
				owner = root
				is_capital = yes
			}
		}
		requires = { samnium_2_task_29 samnium_2_task_22 samnium_2_task_26 }
		on_completion = {
			trigger_event = { id = samnium_event.54 }
			show_as_tooltip = {
				add_country_modifier = {
					name = sam_richest_peasant
					duration = -1
				}
			}
		}
	}

	samnium_2_task_31 = { # resistance appease families
		icon = "task_conquest"
		allow = {
			political_influence >= 50
            custom_tooltip = {
                text = saba_admin_tt
                any_character = {
                    count >= 2
                    is_head_of_family = yes
                    from_ruler_family = no
                    loyalty >= 66
                }
            }
		}
		requires = { samnium_2_task_3 }
		on_completion = {
			trigger_event = { id = samnium_event.55 }
			show_as_tooltip = {
				add_political_influence >= -50
				add_country_modifier = {
					name = sam_pacified_families
					duration = 5475
				}
			}
		}
	}

	samnium_2_task_32 = { # ver sacrum upgrade for resistance path
		icon = "task_conquest"
		allow = {
			custom_tooltip = {
				text = ver_sacrum_count_tt
				var:ver_sacrum_num_var >= 3
			}
		}
		requires = { samnium_2_task_31 }
		on_completion = {
			set_variable = sam_res_ver_sacrum_bonus
			trigger_event = { id = samnium_event.77 }
			show_as_tooltip = {
				custom_tooltip = sam_res_ver_sacrum_bonus_tt
			}
		}
	}

	samnium_2_task_33 = { # ver sacrum upgrade for syncretic
		icon = "task_conquest"
		allow = {
			political_influence >= 25
			custom_tooltip = {
				text = ver_sacrum_count_tt
				var:ver_sacrum_num_var >= 3
			}
		}
		requires = { samnium_2_task_4 }
		on_completion = {
			set_variable = sam_sync_ver_sacrum_bonus
			trigger_event = { id = samnium_event.78 }
			show_as_tooltip = {
				add_political_influence = -25
				custom_tooltip = sam_sync_ver_sacrum_bonus_tt
			}
		}
	}
}
