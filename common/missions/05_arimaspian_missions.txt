arimaspia_missions = {
    header = "mission_image_scythian"
    icon = "cde_gallic_village"

    repeatable = no

    chance = {
        factor = 50
    }

    potential = {
        NOT = { has_variable = arimaspia_missions_aborted }
        is_subject = no
        has_civil_war = no
		is_tribal = yes
		tag = SS2
    }

    abort = {
        ai_mission_back_out_trigger = yes
    }

    on_start = {
        start_mission_ai_effect = yes
		trigger_event = me_arimaspia.90
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = arimaspia_missions_aborted
            days = 7300
        }
    }

    arimaspia_missions_task_1 = { #Tigthen The Yoke
        icon = "task_political"

        allow = {
			any_subject = {
				count >= 1
			}
		}

        on_completion = {
            trigger_event = me_arimaspia.1
            custom_tooltip = arimaspia_missions_task_1_decision
        }
    }

    arimaspia_missions_task_2 = { #Successors Of Cimmerians
        icon = "task_political"

        allow = {
			has_aggressive_expansion >= 10
		}

        on_completion = {
            trigger_event = me_arimaspia.2
            custom_tooltip = arimaspia_missions_task_2_claims
			hidden_effect = {
				area:akmola_area = { mission_area_claim_effect = yes }
				area:korgantas_area = { mission_area_claim_effect = yes }
				area:magyarok_area = { mission_area_claim_effect = yes }
				area:itkul_area = { mission_area_claim_effect = yes }
				area:zyria_area = { mission_area_claim_effect = yes }
			}
        }
    }

    arimaspia_missions_task_3 = { #Fall Of Gryphia
        icon = "task_political"
		requires = { arimaspia_missions_task_1 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = gryphia_area
					is_in_area = ob_area
				}
			}
        }

        allow = {
			owns_area = gryphia_area
			owns_area = ob_area
		}

        on_completion = {
            trigger_event = me_arimaspia.3
            show_as_tooltip = {
				add_treasury = 500
				add_war_exhaustion = -3
				current_ruler = {
					add_popularity = 20
				}
            }
        }
    }

    arimaspia_missions_task_4 = { #Our Ilmaric Faith
        icon = "task_political"
		requires = { arimaspia_missions_task_1 }

        allow = {
			any_owned_province = {
				count >= 60
				dominant_province_religion = root.religion
			}
			custom_tooltip = {
				text = arimaspia_missions_task_4_priest
				any_character = {
					OR = {
						has_office = office_high_priest
						has_office = office_augur
						has_office = office_high_priest_monarchy
					}
					zeal >= 7
				}
			}
		}

        on_completion = {
            trigger_event = me_arimaspia.4
            show_as_tooltip = {
				capital_scope = {
					create_state_pop = freemen
					create_state_pop = freemen
					create_state_pop = freemen
					create_state_pop = freemen
					add_special_pop = {
						text = "add_2_priest_tt"
						type = priest
						count = 2
					}
				}
				current_ruler = {
					add_focus_perk = {
						text = "add_1_char_perk"
						amount = 1
					}
				}
            }
        }
    }

    arimaspia_missions_task_5 = { #Steppes Of The South
        icon = "task_political"
		requires = { arimaspia_missions_task_1 arimaspia_missions_task_2 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = akmola_area
					is_in_area = korgantas_area
				}
			}
        }

        allow = {
			owns_area = akmola_area
			owns_area = korgantas_area
		}

        on_completion = {
            trigger_event = me_arimaspia.5
            custom_tooltip = arimaspia_missions_task_5_claims
			hidden_effect = {
				area:upper_uralia_area = { mission_area_claim_effect = yes }
				area:aktobe_area = { mission_area_claim_effect = yes }
			}
        }
    }
    arimaspia_missions_task_6 = { #Consolidate The Urals
        icon = "task_political"
		requires = { arimaspia_missions_task_2 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = magyarok_area
					is_in_area = itkul_area
					is_in_area = zyria_area
				}
			}
        }

        allow = {
			owns_area = magyarok_area
			owns_area = itkul_area
			owns_area = zyria_area
		}

        on_completion = {
            trigger_event = me_arimaspia.6
            custom_tooltip = arimaspia_missions_task_6_claims
			hidden_effect = {
				area:karaabyz_area = { mission_area_claim_effect = yes }
				area:ananyino_area = { mission_area_claim_effect = yes }
				area:hyperborea_extremus_area = { mission_area_claim_effect = yes }
			}
        }
    }

    arimaspia_missions_task_7 = { #Tree Of Life
        icon = "task_political"
		requires = { arimaspia_missions_task_3 arimaspia_missions_task_4 }
		duration = 180

        allow = {
			custom_tooltip = {
				text = arimaspia_missions_task_7_gold_mine
				any_owned_province = {
					trade_goods = precious_metals
					has_building = slave_mine_building
				}
			}
			country_has_special_pop = {
                text = "country_has_1_artist_tt"
                type = artist
                count = 1
            }
		}

        on_completion = {
            trigger_event = me_arimaspia.7
            show_as_tooltip = {
				add_stability = 10
				create_country_treasure = {
					key = "golden_tree_of_life"
					icon = "treasure_chest"
					modifier = {
						local_population_growth = 0.25
						local_population_capacity_modifier = 0.2
					}
				}
            }
        }
    }

    arimaspia_missions_task_8 = { #Of Pastures And Hunters
        icon = "task_political"
		requires = { arimaspia_missions_task_5 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = kostanay_area
					is_in_area = ingala_area
					is_in_area = irmen_area
					is_in_area = akmola_area
				}
			}
        }

        allow = {
			custom_tooltip = {
				text = arimaspia_missions_task_8_pastures
				any_owned_province = {
					count >= 3
					OR = {
						is_in_area = kostanay_area
						is_in_area = ingala_area
						is_in_area = irmen_area
						is_in_area = akmola_area
					}
					has_building = tribal_pastures_building
				}
			}
			custom_tooltip = {
				text = arimaspia_missions_task_8_hunters
				any_owned_province = {
					count >= 3
					OR = {
						is_in_area = kostanay_area
						is_in_area = ingala_area
						is_in_area = irmen_area
						is_in_area = akmola_area
					}
					has_building = hunting_building
				}
			}
		}

        on_completion = {
            trigger_event = me_arimaspia.8
			custom_tooltip = arimaspia_missions_task_8_prov
            show_as_tooltip = {
				random_owned_province = {
					limit = {
						OR = {
							is_in_area = kostanay_area
							is_in_area = ingala_area
							is_in_area = irmen_area
							is_in_area = akmola_area
						}
					}
					add_province_modifier = {
						name = arimaspian_land_dev
						duration = 10950
					}
				}
            }
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							is_in_area = kostanay_area
							is_in_area = ingala_area
							is_in_area = irmen_area
							is_in_area = akmola_area
						}
					}
					add_province_modifier = {
						name = arimaspian_land_dev
						duration = 10950
					}
				}
			}
        }
    }

    arimaspia_missions_task_9 = { #Meddling In Hyperborea
        icon = "task_political"
		requires = { arimaspia_missions_task_5 arimaspia_missions_task_6 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = karaabyz_area
					is_in_area = ananyino_area
					is_in_area = hyperborea_extremus_area
				}
			}
        }

        allow = {
			owns_area = karaabyz_area
			owns_area = ananyino_area
			owns_area = hyperborea_extremus_area
		}

        on_completion = {
            trigger_event = me_arimaspia.9
            custom_tooltip = arimaspia_missions_task_9_claims
			hidden_effect = {
				area:dyakovo_area = { mission_area_claim_effect = yes }
				area:androphagia_superior_area = { mission_area_claim_effect = yes }
				area:joki_area = { mission_area_claim_effect = yes }
			}
        }
    }

    arimaspia_missions_task_10 = { #Seizing Upper Uralia
        icon = "task_political"
		requires = { arimaspia_missions_task_5 arimaspia_missions_task_6 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = upper_uralia_area
					is_in_area = aktobe_area
				}
			}
        }

        allow = {
			owns_area = upper_uralia_area
			owns_area = aktobe_area
		}

        on_completion = {
            trigger_event = me_arimaspia.10
            custom_tooltip = arimaspia_missions_task_10_claims
			hidden_effect = {
				area:zhanaqala_area = { mission_area_claim_effect = yes }
				area:durse_area = { mission_area_claim_effect = yes }
				area:transhyrcania_area = { mission_area_claim_effect = yes }
				area:atara_area = { mission_area_claim_effect = yes }
				area:atyrau_area = { mission_area_claim_effect = yes }
			}
        }
    }

    arimaspia_missions_task_11 = { #Golden Kurgans
        icon = "task_political"
		requires = { arimaspia_missions_task_7 }

        allow = {
			custom_tooltip = {
				text = arimaspia_missions_task_11_kurgans
				any_owned_province = {
					OR = {
						is_in_area = ingala_area
						is_in_area = irmen_area
					}
					count >= 3
					is_holy_site = yes
				}
			}
		}

        on_completion = {
            trigger_event = me_arimaspia.11
            show_as_tooltip = {
				add_country_modifier = {
					name = arimaspian_kurgans
					duration = -1
				}
				add_2_free_province_investments = yes
            }
        }
    }

    arimaspia_missions_task_12 = { #Slay The Man-Eaters
        icon = "task_political"
		requires = { arimaspia_missions_task_9 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = dyakovo_area
					is_in_area = androphagia_superior_area
					is_in_area = joki_area
				}
			}
        }

        allow = {
			owns_area = dyakovo_area
			owns_area = androphagia_superior_area
			owns_area = joki_area
		}

        on_completion = {
            trigger_event = me_arimaspia.12
            custom_tooltip = arimaspia_missions_task_12_claims
			hidden_effect = {
				area:velho_area = { mission_area_claim_effect = yes }
				area:ilmandu_superior_area = { mission_area_claim_effect = yes }
				area:ilmandu_inferior_area = { mission_area_claim_effect = yes }
			}
        }
    }

    arimaspia_missions_task_13 = { #End Of Alan Sovereignity
        icon = "task_political"
		requires = { arimaspia_missions_task_10 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = zhanaqala_area
					is_in_area = durse_area
					is_in_area = transhyrcania_area
					is_in_area = atara_area
					is_in_area = atyrau_area
				}
			}
        }

        allow = {
			owns_area = zhanaqala_area
			owns_area = durse_area
			owns_area = transhyrcania_area
			owns_area = atara_area
			owns_area = atyrau_area
		}

        on_completion = {
            trigger_event = me_arimaspia.13
			show_as_tooltip = {
				current_ruler = {
					add_popularity = 10
				}
            }
            custom_tooltip = arimaspia_missions_task_13_claims
			hidden_effect = {
				area:alania_orientalis_area = { mission_area_claim_effect = yes }
				area:alania_proper_area = { mission_area_claim_effect = yes }
				area:confluenta_area = { mission_area_claim_effect = yes }
				area:tanassa_area = { mission_area_claim_effect = yes }
				area:danaia_superioris_area = { mission_area_claim_effect = yes }
			}
        }
    }

    arimaspia_missions_task_14 = { #Unify Our Great State
        icon = "task_political"
		requires = { arimaspia_missions_task_11 }

        allow = {
			centralization >= 50
			current_ruler = {
				popularity >= 80
				custom_tooltip = {
                    text = does_not_have_true_ruler_tt
                    has_variable = true_ruler_var
                }
			}
		}

        on_completion = {
            trigger_event = me_arimaspia.14
            show_as_tooltip = {
				add_political_influence = 150
            }
        }
    }

    arimaspia_missions_task_15 = { #The Frozen Sea
        icon = "task_political"
		requires = { arimaspia_missions_task_12 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = velho_area
					is_in_area = ilmandu_superior_area
					is_in_area = ilmandu_inferior_area
				}
			}
        }

        allow = {
			owns_area = velho_area
			owns_area = ilmandu_superior_area
			owns_area = ilmandu_inferior_area
			any_owned_province = {
				OR = {
					is_in_area = velho_area
					is_in_area = ilmandu_superior_area
					is_in_area = ilmandu_inferior_area
				}
				is_port = yes
			}
		}

        on_completion = {
            trigger_event = me_arimaspia.15
            show_as_tooltip = {
				random_owned_province = {
					limit = {
						OR = {
							is_in_area = velho_area
							is_in_area = ilmandu_superior_area
							is_in_area = ilmandu_inferior_area
						}
						is_port = yes
					}
					owner = {
						create_unit = {
							navy = yes
							location = prev.prev
							hidden_effect = {
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
								add_subunit = liburnian
							}
						}
					}
				}
            }
        }
    }

    arimaspia_missions_task_16 = { #Fall Of Sarmatia
        icon = "task_political"
		requires = { arimaspia_missions_task_12 arimaspia_missions_task_13 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = alania_orientalis_area
					is_in_area = alania_proper_area
					is_in_area = confluenta_area
					is_in_area = tanassa_area
					is_in_area = danaia_superioris_area
				}
			}
        }

        allow = {
			owns_area = alania_orientalis_area
			owns_area = alania_proper_area
			owns_area = confluenta_area
			owns_area = tanassa_area
			owns_area = danaia_superioris_area
		}

        on_completion = {
            trigger_event = me_arimaspia.16
            show_as_tooltip = {
				current_ruler = {
					add_popularity = 10
				}
            }
            custom_tooltip = arimaspia_missions_task_16_claims
			hidden_effect = {
				region:taurica_region = {
					every_region_province = {
						add_claim = root
					}
				}
				region:albania_region = {
					every_region_province = {
						add_claim = root
					}
				}
			}
        }
    }

    arimaspia_missions_task_17 = { #Cross The Caucasus
        icon = "task_political"
		requires = { arimaspia_missions_task_16 }

		highlight = {
			scope:province = {
				OR = {
					is_in_area = sarmatia_hyrcania_area
					is_in_area = scythia_trans_montem_area
					is_in_area = caucasian_albania_area
					is_in_area = hyrcania_superior_area
				}
			}
        }

        allow = {
			owns_area = sarmatia_hyrcania_area
			owns_area = scythia_trans_montem_area
			owns_area = caucasian_albania_area
			owns_area = hyrcania_superior_area
		}

        on_completion = {
            trigger_event = me_arimaspia.17
            show_as_tooltip = {
				add_military_experience = 20
            }
			custom_tooltip = arimaspia_missions_task_17_claims
			hidden_effect = {
				region:media_region = {
					every_region_province = {
						add_claim = root
					}
				}
				region:armenia_region = {
					every_region_province = {
						add_claim = root
					}
				}
			}
        }
    }

    arimaspia_missions_task_18 = { #Times New Cimmerians
        icon = "task_political"
		requires = { arimaspia_missions_task_14 arimaspia_missions_task_16 }
		final = yes

		highlight = {
			scope:province = {
				OR = {
					is_in_area = maeotia_area
					is_in_area = taurica_area
					is_in_area = bosproranum_area
					is_in_area = borysthenia_minor_area
					is_in_area = maeotia_minores_area
				}
			}
        }

        allow = {
			owns_area = maeotia_area
			owns_area = taurica_area
			owns_area = bosproranum_area
			owns_area = borysthenia_minor_area
			owns_area = maeotia_minores_area
		}

        on_completion = {
            trigger_event = me_arimaspia.18
            show_as_tooltip = {
				current_ruler = {
					add_popularity = 20
				}
				add_country_modifier = {
					name = "arimaspia_cimmerians"
					duration = -1
				}
            }
            custom_tooltip = arimaspia_missions_task_18_claims
			hidden_effect = {
				region:scythia_region = {
					every_region_province = {
						add_claim = root
					}
				}
				region:dacia_region = {
					every_region_province = {
						add_claim = root
					}
				}
			}
        }
    }
}
